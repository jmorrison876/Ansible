---
# YAML documents begin with the document separator ---
 
# The minus in YAML this indicates a list item.  The playbook contains a list
# of plays, with each play being a dictionary
-
 
  # Hosts: where our play will run and options it will run with
  hosts: servers
  gather_facts: True
 
  # Vars: variables that will apply to the play, on all target systems
  vars_files:
    - variables.yml

  tasks:
    - name: Configure and bring up static IP address for enp0s8
      nmcli:
        conn_name: 'System enp0s8'
        state: present
        ipv4:
          address: 10.3.3.5/24
          gateway: 10.3.3.1
          dns: 8.8.8.8
          method: manual
          never_default: false
      register: nmcli_result

    - name: Bring up the connection if changes were made
      nmcli:
        conn_name: 'System enp0s8'
        state: up
      when: nmcli_result.changed

...
